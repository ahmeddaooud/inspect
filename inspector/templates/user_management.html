{% extends "layout.html" %}
{% block head %}

{% endblock %}
{% block content %}

<h5><i class="icon-time"></i><strong> All Users </strong></h5>
{% if users %}
{% block sidebar %}
<table>
  <tr>
    <th>User Name</th>
    <th>Email</th>
    <th>User Policy</th>
    <th>Creation Date</th>
    <th>Active</th>
  </tr>
{% for user in users %}
  <tr>
    <td>{{ user.name }}</td>
    <td>{{ user.username }}</td>
    <td>{{ user.user_policy }}</td>
    <td>{{ user.creation_date }}</td>
    <td>{{ user.active }}</td>
  </tr>

     {% else %}
        <p style="margin-left: -24px; color: gray;">
            No users.
        </p>
{% endfor %}
</table>


{% endblock %}
{% endif %}

<div class="login-box" style="margin-top: 0px;">
    <div class="login-box-body">
        <p class="login-box-msg">Enter user details</p>
        <form autocomplete="new" action="/_create_user" method="post" accept-charset="utf-8">
            <div class="form-group has-feedback">
                <input type="text" name="name" placeholder="Name" class="form-control" id="name"
                       maxlength="80" size="30" autofocus="" autocorrect="off" autocapitalize="off"
                       spellcheck="false" autocomplete="new" required> <span class="glyphicon glyphicon-user form-control-feedback"></span>
                <span><font color="red"></font></span>
            </div>
            <div class="form-group has-feedback">
                <input type="email" name="username" placeholder="Email" class="form-control" id="email"
                       maxlength="80" size="30" autofocus="" autocorrect="off" autocapitalize="off"
                       spellcheck="false" autocomplete="new" required> <span class="glyphicon glyphicon-user form-control-feedback"></span>
                <span><font color="red"></font></span>
            </div>
            <div class="form-group has-feedback">
                <input type="password" name="password" placeholder="Password" class="form-control"
                       id="password" size="30" autocomplete="new" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}"
                       title="Must contain at least one number and one uppercase and lowercase letter, and at least 6 or more characters"
                       required> <span
                    class="glyphicon glyphicon-lock form-control-feedback"></span>
                <span><font color="red"></font></span>
            </div>
            <select class="form-control" id="user_role" name="user_role" required>
                <option selected="" value=""></option>
                <option value="admin">Admin</option>
                <option value="super_user">Super User</option>
                <option value="internal_user">Internal User</option>
                <option value="external_user">External User</option>
            </select><br>
            <div class="form-submit">
                    <input type="submit" name="submit" value="Create new user" id="submit"
                           class="btn btn-success btn-block btn-flat"></div>
        </form>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <h4 style="color:black;" class="login-field-icon fui-lock">{{ message }} </h4>
        {% endfor %}
        {% else %}
        <h4 style="color:white;" class="login-field-icon fui-lock">_</h4>
        {% endif %}
        {% endwith %}
    </div>
</div>

</div>

{% endblock %}
